---
import Button from './Button.astro';
---

<section aria-labelledby="story-heading" class="relative bg-[var(--pyre-creme)] text-[var(--foreground)]">
  <div class="mx-auto w-full px-4 sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-8 min-h-[100dvh] items-stretch">
      <!-- Left: Image -->
      <div class="md:col-span-6 relative order-2 md:order-1 pt-8 md:pt-0">
        <!-- Full-bleed vertical pattern strip to the left gutter on desktop -->
        <div aria-hidden="true" class="hidden md:block absolute inset-y-0 left-[calc(50%-50vw)] right-[100%] bg-repeating-logo bg-center" />
        <div class="h-[55vh] md:h-full w-full overflow-clip relative">
          <img
            src="/images/sauna_ladle_multiexposure.jpeg"
            alt="Multi-exposure photograph of a wooden sauna ladle evoking ritual and heat."
            width="1280"
            height="1920"
            loading="lazy"
            decoding="async"
            class="h-full w-full object-cover object-center"
          />
          <!-- Mobile-only centered overlay symbol -->
          <div class="absolute inset-0 flex items-center justify-center md:hidden pointer-events-none">
            <div class="bg-[var(--pyre-blue)] rounded-full flex items-center justify-center w-20 h-20 sm:w-24 sm:h-24">
              <img
                src="/symbols/sauna-symbol.png"
                alt="Sauna symbol"
                decoding="async"
                class="w-full h-full object-contain"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Text -->
      <div class="md:col-span-6 flex items-center py-8 md:py-0 bg-[var(--pyre-creme)] order-1 md:order-2">
        <div class="max-w-[75ch] bg-[var(--pyre-creme)]">
          <div class="md:flex md:items-start md:gap-4 mb-6 sm:mb-8">
            <div
              class="hidden md:flex bg-[var(--pyre-blue)] rounded-full items-center justify-center w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 flex-shrink-0"
            >
              <img
                src="/symbols/sauna-symbol.png"
                alt="Sauna symbol"
                decoding="async"
                class="w-full h-full object-contain"
              />
            </div>
            <div >
              <h2 id="story-heading" class="font-primary-semibold tracking-[-0.02em] uppercase text-[clamp(3.5rem,5vw,4rem)] leading-[1.1] mb-4">
                RITUALS FOR MODERN LIFE
              </h2>
              <div class="space-y-4 text-base leading-relaxed">
                <p>
                  Pyre is a space that can be experienced alone or together. A space that serves as a balancing force to modern life’s demands and stressors. Pyre is a space to reconnect to what really matters:
                </p>
                <ul class="list-none pl-0 space-y-1">
                  <li class="font-primary-semibold text-center">Yourself</li>
                  <li class="font-primary-semibold text-center">Your Community</li>
                  <li class="font-primary-semibold text-center">The Present Moment</li>
                </ul>
                <p>
                  Centered around healing practices that have been around for thousands of years, we’ve re-imagined European bathhouse culture for Richmond. 
    
                  </p>
                  <p>A space where you can take a quiet moment alone in our silent sauna, where you can connect with friends and strangers in our social lounge. Where you can relieve anxiety in our cold pool. Where you can take guided classes that pair sauna and cold bathing with breathwork, meditation, expression, sound, and many other modalities with the goal of helping us all heal. When you leave Pyre you will feel better than when you walked in. This is a new way to connect. </p>
                  <span class="" >Come experience change for yourself.</p>
                </p>
              </div>
              <div class="mt-6 sm:mt-8">
                <Button
                  variant="primary"
                  size="lg"
                  href="#signup"
                  ariaLabel="Join the waitlist — jump to signup form"
                  class="w-full sm:w-auto"
                >
                  Join the Waitlist
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const section = document.querySelector('section[aria-labelledby="story-heading"]');
  const cta = section?.querySelector('a[href="#signup"]');
  if (cta) {
    cta.addEventListener('click', () => {
      try {
        const w = window as any;
        if (typeof w.plausible === 'function') {
          w.plausible('cta_waitlist_story_click');
        } else if (typeof w.gtag === 'function') {
          w.gtag('event', 'cta_waitlist_story_click');
        } else if (Array.isArray(w.dataLayer)) {
          w.dataLayer.push({ event: 'cta_waitlist_story_click' });
        } else {
          window.dispatchEvent(new CustomEvent('cta_waitlist_story_click'));
        }
      } catch {}

      const focusEmail = () => {
        const emailInput = document.getElementById('email');
        if (emailInput && typeof emailInput.focus === 'function') {
          try {
            emailInput.focus({ preventScroll: true });
          } catch {
            emailInput.focus();
          }
        }
      };

      setTimeout(focusEmail, 400);
    });
  }
</script>


