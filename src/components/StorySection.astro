---
import Button from './Button.astro';
---

<section aria-labelledby="story-heading" class="relative bg-[var(--background)] text-[var(--foreground)]">
  <div class="mx-auto w-full px-4 sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-8 min-h-[100dvh] items-stretch">
      <!-- Left: Image -->
      <div class="md:col-span-6 relative">
        <!-- Full-bleed vertical pattern strip to the left gutter on desktop -->
        <div aria-hidden="true" class="hidden md:block absolute inset-y-0 left-[calc(50%-50vw)] right-[100%] bg-repeating-logo bg-center" />
        <div class="h-[55vh] md:h-full w-full overflow-clip">
          <img
            src="/images/sauna_ladle_multiexposure.jpeg"
            alt="Multi-exposure photograph of a wooden sauna ladle evoking ritual and heat."
            width="1280"
            height="1920"
            loading="lazy"
            decoding="async"
            class="h-full w-full object-cover object-center"
          />
        </div>
      </div>

      <!-- Right: Text -->
      <div class="md:col-span-6 flex items-center py-8 md:py-0">
        <div class="max-w-[75ch]">
          <div class="flex items-start gap-4 mb-6 sm:mb-8">
            <div
              class="bg-[var(--pyre-black)] rounded-full flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 lg:w-28 lg:h-28 flex-shrink-0"
            >
              <img
                src="/symbols/sauna-symbol.png"
                alt="Sauna symbol"
                decoding="async"
                class="w-2/3 h-2/3 object-contain"
              />
            </div>
            <div>
              <h2 id="story-heading" class="font-primary-semibold tracking-[-0.02em] uppercase text-[4.236rem] sm:text-[4.618rem] leading-[1.1] mb-4">
                RITUALS FOR MODERN LIFE
              </h2>
              <div class="space-y-4 text-base leading-relaxed">
                <p>
                  At Pyre, we're reimagining the ancient traditions of saunas and cold baths for a modern era.
                </p>
                <p>
                  For thousands of years, these healing practices have brought communities together, fostering deep connections while providing restorative experiences for both body and mind. This environment is designed to cultivate joy and meaningful connection, whether you're seeking quiet personal reflection or want to explore a unique social setting.
                </p>
                <p>
                  It's an experience that aims to prioritize your health and help you reconnect with what truly matters, so you'll leave feeling better than when you walked in. 
                </p>
                <p class="font-primary-semibold">Here, meaningful change begins, one restorative experience at a time.</p>
              </div>
              <div class="mt-6 sm:mt-8">
                <Button
                  variant="primary"
                  size="lg"
                  href="#signup"
                  ariaLabel="Join the waitlist â€” jump to signup form"
                  class="w-full sm:w-auto"
                >
                  Join the Waitlist
                </Button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const section = document.querySelector('section[aria-labelledby="story-heading"]');
  const cta = section?.querySelector('a[href="#signup"]');
  if (cta) {
    cta.addEventListener('click', () => {
      try {
        const w = window as any;
        if (typeof w.plausible === 'function') {
          w.plausible('cta_waitlist_story_click');
        } else if (typeof w.gtag === 'function') {
          w.gtag('event', 'cta_waitlist_story_click');
        } else if (Array.isArray(w.dataLayer)) {
          w.dataLayer.push({ event: 'cta_waitlist_story_click' });
        } else {
          window.dispatchEvent(new CustomEvent('cta_waitlist_story_click'));
        }
      } catch {}

      const focusEmail = () => {
        const emailInput = document.getElementById('email');
        if (emailInput && typeof emailInput.focus === 'function') {
          try {
            emailInput.focus({ preventScroll: true });
          } catch {
            emailInput.focus();
          }
        }
      };

      setTimeout(focusEmail, 400);
    });
  }
</script>


