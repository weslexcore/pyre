## Feature 0009 — Story Section CTA: “Join the Waitlist”

### Description
Add a prominent “SIGN UP” call-to-action button beneath the copy in `src/components/StorySection.astro` on the homepage. The button should guide users directly to the existing email waitlist signup section and encourage conversions while matching the brand and design system. Placement must work responsively across breakpoints and meet accessibility standards.

Verbatim requirements from brief:
- Clear CTA: Button labeled “Join the Waitlist” placed immediately below the story text block
- Behavior: Scrolls to or reveals the existing waitlist form section on the same page (anchor `#waitlist`), with keyboard focus management
- States: Hover, focus-visible ring, and disabled/loading (if needed) for consistent feedback
- Tracking: Fire analytics event (e.g., `cta_waitlist_story_click`) on interaction to measure conversions
- Accessibility: Semantic button role, proper color contrast, and focus order preserved

### Relevant files and changes
- `src/components/StorySection.astro`
  - Insert a CTA using the existing `Button` component directly under the final paragraph of the story text block on the right column.
  - Use `variant="primary"` to match brand CTAs, with `size="lg"` for prominence.
  - Provide `href="#signup"` for progressive enhancement (native anchor scroll) and add an `ariaLabel` like “Join the waitlist — jump to signup form”.
  - Add responsive spacing utilities so the CTA sits comfortably under the text (e.g., `mt-6 sm:mt-8`). Consider `w-full sm:w-auto` for mobile-first width.
  - Add a small client-side click handler to manage focus and analytics (details in Behavior & Analytics sections). Keep the default link behavior for non-JS users.

- `src/components/Button.astro`
  - No structural changes expected. Confirm existing focus styles rely on global ring variables and that `disabled` state is visually clear. This component already supports `href` and `type`, so it can render as a link.

- `src/components/SignupForm.astro`
  - Keep existing section `id="signup"` to avoid breaking the header/navbar CTA which links to `#signup`.
  - Add an additional alias anchor for `#waitlist` to satisfy the brief without breaking existing links:
    - Insert a zero-height, visually inert element (e.g., `<div id="waitlist" aria-hidden="true" class="h-0"></div>`) immediately before the current `<section id="signup">` wrapper.
  - Ensure the email input retains `id="email"` for focus transfer.

- `src/pages/index.astro`
  - No changes required. Order remains `<Hero />`, divider, `<StorySection />`, divider, `<SignupForm />`.

- `src/styles/global.css`
  - Already provides `html { scroll-behavior: smooth; }` and focus outlines via `--ring`. No changes required.

### Behavior: scroll and focus management
Goal: clicking the CTA should scroll to the signup section and then move keyboard focus to the email input for immediate entry, while remaining robust without JavaScript.

Implementation details:
1. Use an anchor `href="#signup"` on the CTA to ensure native scroll works with or without JS.
2. Add a lightweight inline script in `StorySection.astro` that:
   - Listens for clicks on the CTA button/link.
   - On click, fires the analytics event (see below).
   - Lets the browser handle anchor navigation (progressive enhancement). After a short delay (e.g., 300–400ms) or on `requestAnimationFrame` loop, programmatically focus the `#email` input using `focus({ preventScroll: true })` if available.
   - If `#email` is not found, do nothing.
3. Maintain default behavior for non-JS environments: the link still scrolls to `#signup` and the user can tab into the form.

### Analytics event
- Event name: `cta_waitlist_story_click`.
- Fire on CTA click before focus transfer.
- Since no canonical analytics library is present in the codebase, guard common providers and provide a no-op fallback:
  - If `window.plausible` exists, call `plausible('cta_waitlist_story_click')`.
  - Else if `window.gtag` exists, call `gtag('event', 'cta_waitlist_story_click')`.
  - Else if `window.dataLayer` exists, `dataLayer.push({ event: 'cta_waitlist_story_click' })`.
  - Else dispatch a `CustomEvent('cta_waitlist_story_click')` on `window` for potential listeners.

### Accessibility considerations
- Use a semantic anchor element (`<a>`) via `Button` with `href="#signup"` for native navigation and fallback.
- Provide an informative `aria-label` such as “Join the waitlist — jump to signup form”.
- Global focus styles already apply an outline using `var(--ring)`. Ensure the button remains clearly visible against background (`variant="primary"` uses `--primary` and `--primary-foreground`).
- Programmatic focus after scroll improves keyboard and screen reader workflows. Use `preventScroll: true` on focus to avoid jank after smooth scroll completes.
- Maintain focus order: the CTA receives focus, then on activation the email field receives focus.

### Responsive layout and spacing
- Place the CTA within the existing right-column content container under the text block in `StorySection.astro`.
- Apply `mt-6 sm:mt-8` to create separation from the last paragraph.
- For mobile, allow the CTA to span full width using `w-full`, reverting to `sm:w-auto` on larger screens.
- Ensure no layout shift for the left image column; the existing grid remains intact.

### Edge cases
- If the email input `#email` is not available, fail gracefully (scroll only, no focus).
- Keep existing `#signup` anchor functional for the navbar CTA. The alias `#waitlist` should also scroll users to the same section.
- Button disabled state is supported by `Button.astro`; not required for anchor mode but acceptable for potential future changes.

### Step-by-step implementation
1. In `src/components/SignupForm.astro`, insert an inert alias anchor with `id="waitlist"` immediately before the `<section id="signup">` wrapper.
2. In `src/components/StorySection.astro`, add a `Button` under the story copy:
   - Props: `variant="primary"`, `size="lg"`, `href="#signup"`, `ariaLabel="Join the waitlist — jump to signup form"`, and `class="mt-6 sm:mt-8 w-full sm:w-auto"`.
   - Text content: “Join the Waitlist”.
3. In `src/components/StorySection.astro`, add a small script that on CTA click:
   - Fires `cta_waitlist_story_click` using provider detection with safe fallbacks.
   - After a short delay, focuses `#email` using `focus({ preventScroll: true })` when supported.
4. Verify smooth scroll works (already provided via global CSS) and that focus moves to the email field.
5. Test with keyboard-only navigation and JS disabled (anchor still navigates to the form).
6. Confirm color contrast and the focus outline meet accessibility standards.


