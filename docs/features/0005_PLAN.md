## 0005 Plan — Remove DaisyUI, migrate to Tailwind core only, and add guardrails

Brief source: “Remove `daisyUI` as a dependency across the codebase and tooling. Replace any `daisyUI` usage with Tailwind CSS core utilities and custom components aligned to the Pyre Design System. Update documentation and rules so `daisyUI` is not reintroduced by accident.”

### Context and current state
- Stack uses Astro + Tailwind v4 (`@tailwindcss/vite`).
- `daisyui` is present in `package.json` and `yarn.lock` but there is no evidence of DaisyUI component class usage in templates/components.
  - Present: `package.json` → dependency `"daisyui"`, `src/styles/global.css` → `@plugin "daisyui"` and comment-labeled “DaisyUI Theme Configuration”.
  - Not found in components/pages: `btn`, `card`, `navbar`, etc. Therefore removal should be low risk.
- Design tokens live in `src/styles/global.css` via Tailwind v4 `@theme` and custom properties; keep these.

### Objectives
1) Remove all code/tooling references to DaisyUI.
2) Replace any DaisyUI-derived styles with Tailwind utilities and design tokens (if encountered later).
3) Add guardrails (docs + CI/script) to prevent reintroduction.

### Files to change
- `package.json`: remove `daisyui` from `dependencies`.
- `yarn.lock`: will be regenerated by the package manager after removal.
- `src/styles/global.css`:
  - Remove `@plugin "daisyui"` line.
  - Keep Pyre tokens in `@theme` and `:root`/`.dark` blocks.
  - Optionally remove DaisyUI-specific variables like `--btn-*` if unused by project components after audit.
- Documentation that mentions DaisyUI:
  - `docs/features/0004_PLAN.md` and `docs/features/0004_REVIEW.md` have optional DaisyUI references; update text to reflect Tailwind-only.
  - `docs/features/0001_PLAN.md` references “DaisyUI/Tailwind utilities”; update to “Tailwind utilities only”.

### Phase 1 — Config and CSS removal (safe, mechanical)
1) Remove dependency
   - Edit `package.json`: delete `"daisyui": "^5.0.50"`.
   - Run install to prune lockfile.
2) Tailwind CSS entry
   - Edit `src/styles/global.css`: delete the line `@plugin "daisyui";`.
   - Keep brand tokens and Tailwind `@theme` content.
   - If no project code uses `--btn-*` variables, remove them to reduce noise; otherwise leave them until Phase 2 completes.
3) Build validation
   - `astro build` should compile successfully since Tailwind v4 and tokens remain intact.

### Phase 2 — Component audit and replacements (if any DaisyUI classes appear)
Although search indicates zero usage, perform a quick audit and provide replacements if encountered:
- Replace `.btn` variants with Tailwind utilities using Pyre tokens:
  - Primary action (example utility recipe):
    - `inline-flex items-center justify-center rounded-[var(--radius)] px-4 py-2 bg-[var(--primary)] text-[var(--primary-foreground)] shadow-sm transition-colors hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ring-[var(--ring)] disabled:opacity-50 disabled:pointer-events-none`
  - Secondary action:
    - Use `bg-[var(--secondary)] text-[var(--secondary-foreground)]` and same shape/focus utilities
  - Outline action:
    - `border border-[var(--border)] text-[var(--foreground)] bg-transparent hover:bg-[var(--muted)]`
- Replace DaisyUI input styles with Tailwind utilities:
  - Inputs: `block w-full rounded-[var(--radius)] border border-[var(--input)] bg-[var(--card)] px-3 py-2 text-[var(--foreground)] placeholder:text-[color-mix(in_oklab,var(--foreground),transparent_70%)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]`
- Cards: `rounded-[var(--radius)] border border-[var(--card-border)] bg-[var(--card)] text-[var(--card-foreground)] shadow-sm`

Note: These are utility recipes; apply directly in `src/components/Button.astro`, `src/components/SignupForm.astro`, and any future primitives, aligning with `tailwind_first` and the Pyre Design System.

### Phase 3 — Guardrails to prevent reintroduction
1) Package script check (local + CI)
   - Add a script to `package.json`:
     - `"check:no-daisyui": "grep -RInE 'daisyui' -- package.json yarn.lock src docs || true; if grep -RInE 'daisyui' -- package.json yarn.lock src docs; then echo 'Error: daisyui detected'; exit 1; else echo 'OK: no daisyui'; fi"`
   - Rationale: Fails if `daisyui` appears in deps, lockfile, CSS, or docs.
2) CI workflow (GitHub Actions example)
   - `.github/workflows/guardrails.yml`
   - Run: `corepack enable && yarn install --immutable && yarn check:no-daisyui && yarn build`
3) Rules/docs
   - Update `tailwind_first` rule and/or developer docs to explicitly prohibit UI plugins (including DaisyUI) and mandate Tailwind core utilities + tokens.
   - Update existing feature docs that mention DaisyUI to reflect Tailwind-only.

### Step-by-step algorithm (automatable)
1) grep -RInE 'daisyui' in repo to confirm occurrences.
2) Edit `package.json` to remove dependency; run `yarn install` to refresh `yarn.lock`.
3) Edit `src/styles/global.css` to remove `@plugin "daisyui"` and (optionally) `--btn-*` variables if unused.
4) Search for DaisyUI classnames (`\b(btn|card|navbar|alert|badge|input|select|textarea)\b`) in `src/` and `docs/`.
5) For any matches, replace with Tailwind utility recipes above, using Pyre tokens.
6) Add `check:no-daisyui` script to `package.json`.
7) Add CI workflow to enforce the check in PRs.
8) Update docs that reference DaisyUI to Tailwind-only terminology.
9) Run `yarn build` to verify.

### Acceptance criteria
- No `daisyui` in `package.json`, `yarn.lock`, or `src/styles/global.css`.
- No DaisyUI classnames in components/pages.
- Build passes; visual parity for `Hero`, `Button`, and `SignupForm`.
- Guardrail script added and CI example provided.
- Docs updated to reflect Tailwind-only policy and Pyre Design System alignment.


