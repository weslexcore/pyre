# Feature Plan: UI Consistency & Landing Page Refresh (0005)

Brief source: UI Consistency & Landing Page Refresh Brief (`docs/briefs/0005_BRIEF.md`)

## Context / Goal
Standardize on Tailwind CSS + daisyUI for simplified, consistent styling while preserving Pyre brand customization. Refresh the landing page with the four sections from the brief, ensure mobile-first, high-contrast Swiss type treatment, accessibility (WCAG AA), and full dark mode support. Align all work with `design_system.mdc`, `symbol_usage.mdc`, and `component_usage.mdc`. Eliminate redundant or conflicting components/styles.

Verbatim requirements to preserve:
- "Hero Section (primary CTA: sign up for newsletter)"
- "About Us"
- "The Offerings (prominent Symbols per `symbol_usage.mdc`)"
- "Newsletter Signup"
- "All work must align with: `design_system.mdc`, `symbol_usage.mdc`, `component_usage.mdc`"
- "mobile-first experience is extremely important"
- "WCAG AA contrast, focus states, keyboard navigation"
- "Dark mode: Fully supported via design system variables and theming"

## Files and concrete edits

- Page/layout
  - `src/pages/index.astro`
    - Ensure the landing page composes sections in order: `<HeroSection />`, `<AboutSection />`, `<ServicesShowcase />`, `<MailingListSignup />`, and ends with `<Footer />` inside `main`.
    - Remove the stale import and usage of `ContactSection` (file has been deleted). This will prevent a build error.
  - `src/layouts/main.astro`
    - Keep global CSS import as-is.
    - Fix asset paths in `<link rel="icon">` and OG/Twitter images to existing files in `public/logos/<palette>/...` (see Assets section). Maintain preloads for critical fonts.

- Global styling and tokens
  - `src/styles/global.css`
    - Keep Tailwind v4 and `@plugin "daisyui"` integration.
    - Validate/adjust brand tokens to ensure 2-color rule from design system: primary (pyre-red + pyre-creme) for CTAs; secondary (pyre-blue + pyre-creme); outline (pyre-black + pyre-creme).
    - Confirm `--ring` usage for focus styles is consistent with DaisyUI theme tokens; ensure visible focus rings on all interactive elements.
    - Verify `.dark` override values meet WCAG AA contrast on creme/black surfaces.

- Components
  - `src/components/HeroSection.astro`
    - Confirm hero uses high-contrast type scale utilities (`.text-scale-*`, `.text-dramatic`) and shows prominent symbols left/right per `symbol_usage.mdc`.
    - Ensure the primary CTA is the newsletter sign-up (“Join the Waitlist”) and links to `#signup` using a consistent button style (`btn btn-primary` or shared `Button.astro`).
    - Keep background image optimized via `astro:assets`. Use a gradient overlay for contrast.
  - `src/components/AboutSection.astro`
    - Keep prominent symbol (e.g., `harmony`). Ensure headings follow a correct hierarchy and readable line length.
    - Mobile-first grid with stacked content; ensure focusable link/CTA to `#signup`.
  - `src/components/ServicesShowcase.astro`
    - Title this “Our Offerings”. Each card includes a prominent `Symbol` at top sized per guidelines and a count badge.
    - Verify all alt text and card semantics; ensure cards are not keyboard traps (no interactive content unless a link/CTA is added).
  - `src/components/MailingListSignup.astro`
    - Maintain accessible labels, `aria-describedby`, and visible focus states.
    - Replace inline `<script>` TypeScript types with valid browser JS or mark the script as TypeScript appropriately. Prefer extracting to a small module-free inline script without TS types for broad compatibility.
    - Add basic client-side validation (firstName, lastName, email) with ARIA live regions for success/error as already structured.
    - Keep the section id `signup` as the target for hero CTA and other links.
  - `src/components/Footer.astro`
    - Fix logo asset paths to point to existing files (choose `gray` or `creme` variant per background). Ensure social links are keyboard accessible and have discernible names.
    - Update “Quick Links” anchors to the new sections (`#signup`, `#services`, `#about`). Remove `#contact` unless implemented.
  - `src/components/Button.astro`
    - Keep variants mapped to DaisyUI semantics; ensure `aria-label` is optional and only added when provided; maintain `disabled` prop.
    - Optionally refactor to reuse `getButtonClasses` from `src/lib/utils.ts` for consistency with system tokens (no behavior change, just centralization).
  - `src/components/ui/Symbol.astro`
    - Keep the validated symbol list and size mapping. Ensure alt text derives from `name` when not provided.
    - Replace client-side `fetch` HEAD validation with a build-time/static mapping only (avoid runtime network). Keep using `astro:assets` `Image`.
  - `src/components/ui/form.astro` and `src/components/ui/input.astro`
    - Ensure classes align with DaisyUI (`form-control`, `input input-bordered`) and include focus ring utilities.

- Assets
  - Logos exist under `public/logos/creme/` and `public/logos/gray/`. Standardize usage:
    - On creme background (default light mode): prefer `gray/` variants for contrast.
    - On dark background: prefer `creme/` variants.
  - Update the following references:
    - `src/layouts/main.astro`: favicon and OG/Twitter images → pick a canonical asset and path that exists.
    - `src/components/Footer.astro`: `src="/logos/logo_with_text.png"` → update to existing palette variant.

## Behavior and algorithms

- Newsletter form validation and messaging (client-only; replace later with real backend)
  1. On submit prevent default; grab `firstName`, `lastName`, `email` from the form.
  2. Validate: non-empty first/last (min length 2); email matches `/^[^\s@]+@[^\s@]+\.[^\s@]+$/`.
  3. If invalid: write a single concatenated message to the validation region and set `aria-live="assertive"` container visible.
  4. If valid: simulate network delay, show success region (`aria-live="polite"`), reset form.
  5. Ensure `hidden` class toggling doesn’t remove nodes (AT needs them present); keep them visually hidden only when not active.

- Symbol prominence and sizing
  1. Map offerings → symbols using the provided `symbolMap`.
  2. Use `prominent={true}` in hero edge columns; `.symbol-xl` or `.symbol-xxl` in cards as needed by layout.
  3. Derive alt text as "<name> symbol" when `alt` prop is not provided; pass via `aria-label` as well.

- 2-color rule enforcement hooks
  - When composing custom classes, prefer DaisyUI tokens and ensure no more than two brand colors are used together. Utilities in `src/lib/utils.ts` (`validateColorCombination`, `enforceColorSeparation`) can be used for runtime asserts in development if needed.

## Accessibility requirements
- Headings are hierarchical per section (no skipped levels); hero uses a single H1.
- All interactive elements have visible focus rings and large hit targets.
- Color contrast meets WCAG AA in both light and dark themes.
- Symbols include meaningful alt text; decorative images use empty alt where appropriate.
- Keyboard navigation flows top-to-bottom through the four sections and footer links.

## Performance
- Use `astro:assets` `Image` for hero and section images with proper dimensions and lazy loading (except hero).
- Preload only critical fonts; avoid blocking assets. Keep `densities` and `quality` settings from `astro.config.mjs` as-is.
- Remove dead imports (`ContactSection`) to avoid build churn.

## Dark mode
- Honor `.dark` variables already defined in `global.css`. Verify contrast for text over backgrounds and button foreground color in dark mode (primary foreground should be black per current theme; confirm against brand rules).

## Migration / cleanup tasks
- Remove `ContactSection` import/usage from `src/pages/index.astro`.
- Delete or ignore any legacy components/styles conflicting with DaisyUI (already removed `src/components/ui/card.astro`).
- Normalize logo asset references across layout/footer to existing files under `public/logos/<palette>/`.
- Ensure no component redefines colors beyond the design system tokens.

## Risks / notes
- TypeScript inside inline `<script>` in `MailingListSignup.astro` is not natively supported by browsers; remove types or mark appropriately. Prefer plain JS for inlined code.
- Tailwind v4 + DaisyUI integration is already configured; avoid adding duplicate configuration in separate files.

## Completion criteria
- Landing page presents the four sections in order and matches the brief’s emphasis on high contrast and symbol prominence.
- Styling is unified via Tailwind + DaisyUI with Pyre tokens; no conflicting legacy styles.
- Accessibility validations pass: focus, semantics, WCAG AA contrast, keyboard navigation.
- Dark mode theme applies correctly across all sections.
- Asset paths are valid; build succeeds with no missing imports or assets.


